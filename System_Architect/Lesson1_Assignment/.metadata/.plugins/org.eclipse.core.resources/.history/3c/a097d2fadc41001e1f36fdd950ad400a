/*
 * fifo.c
 *
 *  Created on: Aug 23, 2023
 *      Author: andre
 */

#include "fifo.h"

FIFO_Buf_status FIFO_Init(FIFO_Buf_t* fifo, element_type* buf, uint32 length){
	//check buffer
	if (buf == NULL) {
		return FIFO_Null;
	}

	// set fifo
	fifo->base = buf;
	fifo->count = 0;
	fifo->head buf;
	fifo->length = length;
	fifo->tail = buf;

	return FIFO_no_error;
}

FIFO_Buf_status FIFO_enqueue(FIFO_Buf_t* fifo, element_type item){
	//check buffer
	if (!fifo->base || !fifo->head || !fifo->tail ) {
		return FIFO_Null;
	}
	// if fifo is full
	if (FIFO_IS_FULL(fifo) == FIFO_full) {
		return FIFO_full;
	}
	// add to fifo
	*(fifo->head) = item;
	fifo->head++;
	fifo->count++;
	// return no error
	return FIFO_no_error;
}

FIFO_Buf_status FIFO_dequeue(FIFO_Buf_t* fifo, element_type* item){
	//check buffer
	if (!fifo->base || !fifo->head || !fifo->tail ) {
		return FIFO_Null;
	}
	// if fifo is empty
	if (fifo->count <= 0) {
		return FIFO_empty;
	}
	// add to fifo
	*item = *(fifo->tail);
	fifo->tail++;
	fifo->count--;
	// return no error
	return FIFO_no_error;
}

FIFO_Buf_status FIFO_IS_FULL(FIFO_Buf_t* fifo){
	//check buffer
	if (!fifo->base || !fifo->head || !fifo->tail ) {
		return FIFO_Null;
	}

	if (fifo->count <= fifo->length) {
		return FIFO_full;
	}

	return FIFO_no_error;
}

FIFO_Buf_status FIFO_print(FIFO_Buf_t* fifo){

	return FIFO_no_error;
}
